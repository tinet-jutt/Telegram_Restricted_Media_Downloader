version: '3.8'

services:
  # 主服务：使用Docker Hub镜像
  trmd:
    image: tomatoknight/telegram-restricted-media-downloader:latest
    container_name: trmd-container
    restart: unless-stopped
    
    # 挂载配置目录
    volumes:
      - ./config:/app/config
      - ./download:/app/download
      - ./sessions:/app/sessions
      - ./temp:/app/temp
    
    # 环境变量
    environment:
      - PYTHONUNBUFFERED=1
    
    # 网络设置
    network_mode: bridge
    
    # 用户设置（避免以root运行）
    user: "1000:1000"
    
    # 日志配置
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"